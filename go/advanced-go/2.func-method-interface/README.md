函数、方法和接口
-------------

函数对应操作序列，是程序的基本组成元素。Go语言中函数有具名和匿名之分；
具名函数一般对应包级的函数，是匿名函数的一种特例。
当匿名函数应用了外部作用于的变量时就成了闭包函数，闭包函数是函数式编程语言的核心。

方法是绑定到一个具体类型上的特殊函数，Go中的方法依托于类型，必须在编译时静态绑定。

接口定义了方法的集合，这些方法依托运行时的接口对象，所以接口对应的方法是在运行时动态绑定的。


### 函数

在Go中，函数是第一类对象，可以将函数保存到变量中。函数支持多个参数和多个返回值，参数和返回值
是以传值的方式和被调用者交换数据。

如果返回值命名了，可以通过名字来修改返回值，也可以通过defer语句在return语句之后修改返回值。

闭包对捕获的外部变量并不是以传值方式访问，而是以引用方式访问。
 * 再定义一个局部变量，让每次迭代defer时捕获的都是不同的变量
 * 将变量通过参数传入，显式的复制所引用的变量

如果以切片为参数调用函数，会给人一种采用了传引用的假象：因为在被调用函数内部可以修改传入的切片
元素。实际上是因为函数参数中显式或隐式的传入了指针。

Go语言函数的递归调用深度在逻辑上没有限制，函数调用的栈是不会出现溢出错误的。因为Go语言运行时会
根据需要动态调整栈的大小（最大可以达到GB级别）。

在Go1.4之后采用的连续的动态栈实现会导致在栈增长时，栈中的变量地址会发生变化，所以在GO中指针
不再是固定不变的（因此不能随意将指针保存到数值变量中，Go语言的地址也不能随意保存到不在垃圾回收
器控制的环境中，因此使用CGO不能在C语言中长期持有Go语言对象的地址）。

Go语言的编译器和运行时会保证指针指向的变量在合适的地方（栈或者堆），所以在Go语言中不需要关心
函数栈和堆的问题。


### 方法

在C++语言中方法对应一个类对象的成员函数，是关联到具体对象上的虚表中的。但是Go语言的方法是关联
到类型的，这样可以在编译阶段完成方法的静态绑定。

方法由函数演变而来，只是将函数的第一个对象参数移动到了函数名前面而已。所以我们可以按照原始的过
程式思想来使用方法。可以将方法还原为普通类型的函数。

在嵌入匿名成员时，不仅可以继承匿名成员的内部成员，而且可以继承匿名成员类型所对应的方法。
在调用匿名成员的方法时，编译器会将其展开为匿名成员的调用（在编译器完成的，所以没有运行时代价）。


### 接口

Go语言试图让程序员在安全和灵活的编程中取得一个平衡。在提供严格的类型检查的同时，通过接口类型
实现了对鸭子类型的支持，使得安全动态的编程变得相对容易。

Go语言中的接口类型是对其他类型行为的抽象和概括，因为接口类型不会和特定的实现细节绑定在一起，
通过这种抽象的方式，我们可以让对象更加灵活和更具有适应能力。

Go语言的接口类型是延迟绑定，可以实现类似虚函数的多态功能。

如果需要限制无意之间的接口匹配，常见的做法是定义一个特殊方法来区分接口。再严格一点的做法是给接口
定义一个私有方法，只有满足了这个私有方法的对象才可能满足这个接口。
```go
package main

type Error interface {
    error
    SpecifyError()
}

type Messager interface{
	error
	private()
}
```
