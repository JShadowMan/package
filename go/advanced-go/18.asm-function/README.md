Go汇编 - 函数
-----------

函数标识符通过`TEXT`汇编指令定义，表示该行开始的指令是定义在text内存段。函数定义语法为
```text
TEXT symbol(SB), [flags,] $framesize[-argsize]
```
函数定义由以下5部分组成：
 * `TEXT`：用于定义函数符号，后面跟着的`(SB)`表示函数名符号相对伪寄存器`SB`的偏移量。
 * `symbol`：表示函数的符号，与`(SB)`结合在一起就是一个绝对地址。
 * `flags`：标志部分用于指示函数的一些特殊行为，例如常见的`NOSPLIT, WRAPPER, NEEDCTXT`等。
 * `framesize`：表示函数的**局部变量**需要多大栈空间，包括调用其他函数时准备调用参数的隐式栈空间。
 * `argsize`：表示函数参数的大小，一般可以省略，Go编译器可以从函数声明中推导出参数大小。

__在Go汇编中，函数也是没有类型的。只要函数的名字和参数大小一致就可以认为是相同的函数了。而且在Go汇编中，输入参数和返回值参数没有任何区别（都是通过`FP`寄存器定位）。__


### 函数参数和返回值

在Go汇编中引用参数和返回值需要使用到`FP`这个伪寄存器（表示函数当前帧的开始地址，也就是第一个参数的位置）。

__为了编写易于维护的汇编代码，Go汇编要求，不同职能以`+0(FP), +8(FP)`的方式访问参数和返回值。必须加上一个临时标识符前缀组合之后才能引用。__
```text
// func Example(a, b int) (r0, r1 int)
a+0(FP)
b+8(FP)
r0+16(FP)
r1+24(FP)
```


### 参数和返回值的内存布局

**函数参数和返回值的大小以及对其问题与结构体的大小及成员的对其问题是一致的。** 函数的第一个参数和第一个返回值会分别进行一次地址对齐（第一个返回值地址需要重新对其机器字大小的倍数）。




